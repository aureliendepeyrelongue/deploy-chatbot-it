(function(e){function t(t){for(var n,o,i=t[0],c=t[1],u=t[2],h=0,d=[];h<i.length;h++)o=i[h],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(d.length)d.shift()();return r.push.apply(r,u||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],n=!0,i=1;i<s.length;i++){var c=s[i];0!==a[c]&&(n=!1)}n&&(r.splice(t--,1),e=o(o.s=s[0]))}return e}var n={},a={app:0},r=[];function o(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=n,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(s,n,function(t){return e[t]}.bind(null,n));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;r.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"1f81":function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var n=s("2b0e"),a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.endConversation,expression:"!endConversation"}],staticClass:"z-depth-2",attrs:{id:"chatbot-app-and-header-wrapper"}},[e._m(0),s("div",{attrs:{id:"chat-container"}},[s("div",{ref:"messageContainerScroll",attrs:{id:"message-container"}},[e._l(e.messages,(function(e,t){return s("div",{key:t},["chatbot"==e.author?s("chat-bot-message",{attrs:{content:e.content}}):s("user-message",{attrs:{content:e.content}})],1)})),s("div",[e.isWaitingChatbotResponse?s("chat-bot-spinner"):e._e(),e.showWasHelpful?s("chat-bot-end-message",{on:{helpful:e.sendHelpfulStatus}}):e._e()],1)],2),s("div",{staticClass:"input-container"},[s("user-input",{on:{message:e.sendMessage}})],1)])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.endConversation,expression:"endConversation"}]},[s("div",{staticClass:"row"},[s("div",{staticClass:"col s12"},[s("div",{staticClass:"card teal darken-1"},[e._m(1),s("div",{staticClass:"card-action",on:{click:e.startConversation}},[s("a",{staticClass:"modal-link-click-exception",attrs:{href:"#!"}},[e._v("Start a new conversation")])])])])])])])},r=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h4",{},[e._v("Talk with our chatbot")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"card-content white-text"},[s("span",{staticClass:"card-title"},[e._v("Thank you !")]),s("p",[e._v(" Thank you for your feedback ! You can find this conversation inside your history ")])])}],o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.userTextMessage,expression:"userTextMessage"}],attrs:{type:"text"},domProps:{value:e.userTextMessage},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage(t)},input:function(t){t.target.composing||(e.userTextMessage=t.target.value)}}})])])},i=[],c={name:"UserInput",data:function(){return{userTextMessage:""}},methods:{sendMessage:function(){""!==this.userTextMessage&&(this.$emit("message",this.userTextMessage),this.userTextMessage="")}}},u=c,l=s("2877"),h=Object(l["a"])(u,o,i,!1,null,"33a687be",null),d=h.exports,f=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"user-message"},[s("div",{staticClass:"message-author"},[e._v(" Me ")]),s("div",{staticClass:"message-content"},[e._v(" "+e._s(e.content)+" ")])])},p=[],v={name:"UserMessage",props:{author:String,content:String}},g=v,m=Object(l["a"])(g,f,p,!1,null,"4db14c2e",null),C=m.exports,b=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"chatbot-message"},[s("div",{staticClass:"message-author"},[e._v(" chatbot ")]),s("div",{staticClass:"message-content",domProps:{innerHTML:e._s(e.content)}})])},_=[],w={name:"ChatBotMessage",props:{content:String}},x=w,y=Object(l["a"])(x,b,_,!1,null,"177e625c",null),M=y.exports,k=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},S=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"chatbot-message"},[s("div",{staticClass:"spinner-container"},[s("div",{staticClass:"spinner"},[s("div",{staticClass:"bounce1"}),s("div",{staticClass:"bounce2"}),s("div",{staticClass:"bounce3"})])])])}],O={name:"ChatBotSpinner"},T=O,E=Object(l["a"])(T,k,S,!1,null,"816fbcbe",null),j=E.exports,$=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"chatbot-message end-message"},[s("div",{staticClass:"message-author"},[e._v(" chatbot ")]),s("div",{staticClass:"message-content"},[s("div",[e._v(" Did you find this conversation helpful ? ")]),s("div",[s("a",{staticClass:"modal-link-click-exception",attrs:{href:"#!"},on:{click:function(t){return e.sendAnswer(!0)}}},[e._v("Yes")]),s("a",{staticClass:"modal-link-click-exception",attrs:{href:"#!"},on:{click:function(t){return e.sendAnswer(!1)}}},[e._v("No")])])])])},q=[],R={name:"ChatBotEndMessage",methods:{sendAnswer:function(e){this.$emit("helpful",e)}}},W=R,H=Object(l["a"])(W,$,q,!1,null,"0563b85d",null),P=H.exports,B=s("bc3a"),A=s.n(B),N={name:"ChatBot",components:{UserInput:d,UserMessage:C,ChatBotMessage:M,ChatBotSpinner:j,ChatBotEndMessage:P},data:function(){return{isWaitingChatbotResponse:!1,requestsCounter:0,messages:[],showWasHelpful:!1,endConversation:!1}},mounted:function(){this.sendStartConversationRequest()},methods:{sendMessage:function(e){var t=this;this.showWasHelpful&&(this.showWasHelpful=!1,this.messages.push({author:"chatbot",content:"As you want let's continue talking ! So you're saying :"})),this.messages.push({author:"Me",content:e}),this.scrollMessage(),this.increaseRequestsCounter(),A.a.get("/chatbot/get-response",{params:{userTextMessage:e}}).then((function(e){if(null!==e.data){var s=e.data;"<EOC>"===s.intent?(t.messages.push({author:"chatbot",content:s.msg}),t.showWasHelpful=!0):t.messages.push({author:"chatbot",content:s.msg}),t.decreaseRequestCounter(),t.scrollMessage()}})).catch((function(e){alert("Error, no internet connexion."),console.trace(e)}))},scrollMessage:function(){this.$nextTick((function(){this.$refs.messageContainerScroll.scrollTop=this.$refs.messageContainerScroll.scrollHeight}))},increaseRequestsCounter:function(){this.requestsCounter++,this.isWaitingChatbotResponse=!0},decreaseRequestCounter:function(){this.requestsCounter--,0===this.requestsCounter&&(this.isWaitingChatbotResponse=!1)},sendHelpfulStatus:function(e){var t=this,s=e?"yes":"no";A.a.get("/chatbot/end_chat",{params:{was_helpful:s}}).then((function(e){null!==e.data&&(t.endConversation=!0)})).catch((function(e){alert("Error, no internet connexion."),console.trace(e)}))},startConversation:function(){this.initializeData(),this.sendStartConversationRequest()},initializeData:function(){this.messages=[],this.endConversation=!1,this.showWasHelpful=!1},sendStartConversationRequest:function(){var e=this;this.scrollMessage(),this.increaseRequestsCounter(),A.a.get("/chatbot/start_chat").then((function(t){if(null!==t.data&&"<SOC>"===t.data.intent){var s=t.data;e.messages.push({author:"chatbot",content:s.msg}),e.decreaseRequestCounter(),e.scrollMessage()}else alert("Wrong answer from the server")})).catch((function(e){alert("Error, no internet connexion."),console.trace(e)}))}}},U=N,z=(s("f0e1"),Object(l["a"])(U,a,r,!1,null,null,null)),D=z.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(D)}}).$mount("#app")},f0e1:function(e,t,s){"use strict";s("1f81")}});
//# sourceMappingURL=app.js.map